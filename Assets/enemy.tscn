[gd_scene load_steps=8 format=3 uid="uid://qgox2rj7nweo"]

[ext_resource type="Script" path="res://Assets/Enemy.gd" id="1_5cry7"]
[ext_resource type="Texture2D" uid="uid://rony6yfs0xsu" path="res://Arta/Tilemap/spritesheet_default.png" id="2_5kqb0"]
[ext_resource type="Texture2D" uid="uid://drqns68gt8n16" path="res://Arta/Info Board/ExclamationMark-16x16-1.png.png" id="3_frlbg"]

[sub_resource type="AtlasTexture" id="AtlasTexture_0622w"]
atlas = ExtResource("2_5kqb0")
region = Rect2(576, 64, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_fqesj"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0622w")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_loxxg"]
size = Vector2(16, 64)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c1a0b"]
size = Vector2(48, 64)

[node name="Enemy" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 7
platform_floor_layers = 4294967044
script = ExtResource("1_5cry7")
jump_power = 275.0
checkpoints = [null]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
light_mask = 2
position = Vector2(0, 0.5)
scale = Vector2(0.5, 1)
sprite_frames = SubResource("SpriteFrames_fqesj")

[node name="excl_mark" type="Sprite2D" parent="."]
visible = false
position = Vector2(0, -48)
texture = ExtResource("3_frlbg")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_loxxg")
debug_color = Color(0.992157, 0, 0.254902, 0)

[node name="Change_State_Cooldown" type="Timer" parent="."]
wait_time = 0.2

[node name="Cooldown_Timer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="Wait_Before_Jump_Timer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="Check_For_Player_To_Follow_Right" type="Area2D" parent="."]
collision_layer = 16

[node name="Check_For_Player" type="CollisionPolygon2D" parent="Check_For_Player_To_Follow_Right"]
modulate = Color(0.266667, 0.266667, 0.266667, 1)
polygon = PackedVector2Array(8, 32, 104, 40, 104, -56, 8, -32)

[node name="Check_For_Player_To_Keep_Following_Right" type="Area2D" parent="."]
collision_layer = 16

[node name="Check_For_Player" type="CollisionPolygon2D" parent="Check_For_Player_To_Keep_Following_Right"]
modulate = Color(0.258824, 0.258824, 0.258824, 1)
polygon = PackedVector2Array(8, 32, 152, 96, 152, -112, 8, -32)

[node name="Check_For_Player_To_Follow_Left" type="Area2D" parent="."]
scale = Vector2(-1, 1)
collision_layer = 16

[node name="Check_For_Player" type="CollisionPolygon2D" parent="Check_For_Player_To_Follow_Left"]
modulate = Color(0.266667, 0.266667, 0.266667, 1)
polygon = PackedVector2Array(8, 32, 104, 40, 104, -56, 8, -32)

[node name="Check_For_Player_To_Keep_Following_Left" type="Area2D" parent="."]
rotation = 3.14159
scale = Vector2(1, -1)
collision_layer = 16

[node name="Check_For_Player" type="CollisionPolygon2D" parent="Check_For_Player_To_Keep_Following_Left"]
modulate = Color(0.258824, 0.258824, 0.258824, 1)
polygon = PackedVector2Array(8, 32, 152, 96, 152, -112, 8, -32)

[node name="Check_For_Player_Ball" type="Area2D" parent="."]
collision_layer = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="Check_For_Player_Ball"]
shape = SubResource("RectangleShape2D_c1a0b")
debug_color = Color(0.298039, 0, 0.113725, 0.419608)

[connection signal="timeout" from="Change_State_Cooldown" to="." method="_on_change_state_cooldown_timeout"]
[connection signal="timeout" from="Cooldown_Timer" to="." method="_on_cooldown_timer_timeout"]
[connection signal="timeout" from="Wait_Before_Jump_Timer" to="." method="_on_wait_before_jump_timer_timeout"]
[connection signal="body_entered" from="Check_For_Player_To_Follow_Right" to="." method="_on_check_for_player_to_follow_body_entered"]
[connection signal="body_exited" from="Check_For_Player_To_Keep_Following_Right" to="." method="_on_check_for_player_to_keep_following_body_exited"]
[connection signal="body_entered" from="Check_For_Player_To_Follow_Left" to="." method="_on_check_for_player_to_follow_body_entered"]
[connection signal="body_exited" from="Check_For_Player_To_Keep_Following_Left" to="." method="_on_check_for_player_to_keep_following_body_exited"]
[connection signal="body_entered" from="Check_For_Player_Ball" to="." method="_on_check_for_player_to_follow_body_entered"]
